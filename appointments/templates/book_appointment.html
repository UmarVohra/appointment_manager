{% extends 'base.html' %}
{% load static %}
{% block title %}
  Book Appointment - Appointment System
{% endblock %}
{% block style %}
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="{% static 'css/form.css' %}" />
{% endblock %}
{% block content %}
  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="header-container">
        <div class="header-content">
          <div class="logo-section">
            <div class="logo-icon">
              <img src="{% static 'images/lj_logo.png' %}" alt="LJ Consultancy Logo">
            </div>
            <h1 class="logo-text">LJ Consultancy</h1>
          </div>
          <nav class="nav-desktop">
            <a href="{% url 'landing_page' %}" class="nav-link">Home</a>
            <a href="#" class="nav-link active">Book Appointment</a>
          </nav>
          <button class="mobile-menu-btn"><i class="fas fa-bars"></i></button>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Form Section -->
  <main class="main-content">
    <div class="container">
      <div class="form-container">
        <!-- Header -->
        <div class="form-header">
          <div class="form-header-icon">
            <i class="fas fa-calendar-plus"></i>
          </div>
          <h2 class="form-title">Book Your Appointment</h2>
          <p class="form-subtitle">Fill out the form below and we'll get back to you within 24 hours</p>
        </div>

        <!-- Form Card -->
        <div class="form-card">
          <form id="appointment-form" method="POST">
            {% if form.non_field_errors %}
              <div class="alert alert-danger">
                {% for error in form.non_field_errors %}
                  <div>{{ error }}</div>
                {% endfor %}
              </div>
            {% endif %}
            {% csrf_token %}
            <!-- Name Field -->
            <div class="form-group">
              <label for="{{ form.fullname.id_for_label }}" class="form-label">Full Name</label>
              <div class="input-container">
                <i class="fas fa-user input-icon"></i>
                {{ form.fullname }}
              </div>

              {% for error in form.fullname.errors %}
                <div class="text-danger">{{ error }}</div>
              {% endfor %}
            </div>

            <!-- Age and Enrollment Row -->
            <div class="form-row form-group">
              <div>
                <label for="{{ form.age.id_for_label }}" class="form-label">Age</label>
                <div class="input-container">
                  <i class="fas fa-calendar-days input-icon"></i>
                  {{ form.age }}
                </div>
                {% for error in form.age.errors %}
                  <div class="text-danger">{{ error }}</div>
                {% endfor %}
              </div>
              <div>
                <label for="{{ form.enroll_no.id_for_label }}" class="form-label">Enrollment No.</label>
                <div class="input-container">
                  <i class="fas fa-id-card input-icon"></i>
                  {{ form.enroll_no }}
                </div>
                {% for error in form.enroll_no.errors %}
                  <div class="text-danger">{{ error }}</div>
                {% endfor %}
              </div>
            </div>

            <!-- Department Field -->
            <div class="form-group">
              <label for="{{ form.department.id_for_label }}" class="form-label">Department</label>
              <div class="input-container">
                <i class="fas fa-building input-icon"></i>
                {{ form.department }}
                <i class="fas fa-chevron-down select-icon"></i>
              </div>
              {% for error in form.department.errors %}
                <div class="text-danger">{{ error }}</div>
              {% endfor %}
            </div>
            {{ booked|json_script:"booked-data" }}
            <!-- Date and Slot Row -->
            <div class="form-row form-group">
              <div>
                <label for="{{ form.date.id_for_label }}" class="form-label">Date</label>
                <div class="input-container">
                  <i class="fas fa-calendar input-icon"></i>
                  {{ form.date }}
                </div>
                {% for error in form.date.errors %}
                  <div class="text-danger">{{ error }}</div>
                {% endfor %}
              </div>
              <div>
                <label for="{{ form.slot.id_for_label }}" class="form-label">Slot</label>
                <div class="input-container">
                  <i class="fas fa-clock input-icon"></i>
                  {{ form.slot }}
                  <i class="fas fa-chevron-down select-icon"></i>
                </div>
                {% for error in form.slot.errors %}
                  <div class="text-danger">{{ error }}</div>
                {% endfor %}
              </div>
            </div>

            <!-- Contact Info Row -->
            <div class="form-row form-group">
              <div>
                <label class="form-label">Phone Number</label>
                <div class="input-container with-prefix">
                  <span class="input-prefix">+91</span>
                  {{ form.phone }}
                </div>
                {% for error in form.phone.errors %}
                  <div class="text-danger">{{ error }}</div>
                {% endfor %}
              </div>
              <div>
                <label class="form-label">Email Address</label>
                <div class="input-container">
                  <i class="fas fa-envelope input-icon"></i>
                  {{ form.email }}
                </div>
                {% for error in form.email.errors %}
                  <div class="text-danger">{{ error }}</div>
                {% endfor %}
              </div>
            </div>

            <!-- Reason Checkboxes -->
            <div class="form-group" style="margin-bottom: 2rem;">
              <label class="form-label" style="margin-bottom: 1rem;">Reason for Appointment</label>
              <div class="checkbox-group">
                {% for radio in form.reason %}
                  <label class="checkbox-item">
                    {{ radio.tag }}
                    <div class="checkbox-custom">
                      <i class="fas fa-check checkbox-icon"></i>
                    </div>
                    <span class="checkbox-label">{{ radio.choice_label }}</span>
                  </label>
                {% endfor %}
              </div>
              {% for error in form.reason.errors %}
                <div class="text-danger">{{ error }}</div>
              {% endfor %}
            </div>

            <!-- Submit Button -->
            <button type="submit" class="submit-btn">
              <i class="fas fa-calendar-check"></i>
              Book My Appointment
            </button>
          </form>
        </div>
      </div>
    </div>
  </main>

  <!-- Success Modal -->
  <div id="success-modal" class="modal">
    <div class="modal-content">
      <div class="modal-icon">
        <i class="fas fa-check"></i>
      </div>
      <img class="modal-image" src="https://storage.googleapis.com/uxpilot-auth.appspot.com/4946780661-13b61e6b46fade467f0a.png" alt="happy person celebrating success with confetti, cheerful illustration style" />
      <h3 class="modal-title">Appointment Booked!</h3>
      <p class="modal-text">Thank you for booking with us. We'll contact you within 24 hours to confirm your appointment details.</p>
      <button onclick="closeModal()" class="modal-btn">Got it, thanks!</button>
    </div>
  </div>

  <script src="{% static 'js/form.js' %}"></script>
{% endblock %}