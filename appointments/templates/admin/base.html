<!DOCTYPE html>
{% load static %}
<html lang="en" class="fontawesome-i2svg-active fontawesome-i2svg-complete">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      {% block title %}
        Appointment System
      {% endblock %}
    </title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <style>
      :root {
        --color-pastel-blue: #e6f3ff;
        --color-soft-blue: #b8e0ff;
        --color-pastel-green: #e8f5e8;
        --color-soft-green: #c8e6c9;
        --color-coral: #ff7f7f;
        --color-coral-light: #ffb3b3;
      }
      
      /* Base Styles */
      html,
      body {
        font-family: Inter, sans-serif;
        margin: 0;
        padding: 0;
      }
      
      /* Sidebar */
      #sidebar {
        position: fixed;
        left: 0;
        top: 0;
        height: 100vh;
        width: 16rem;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
        border-top-right-radius: 1.5rem;
        border-bottom-right-radius: 1.5rem;
        z-index: 50;
        visibility: hidden;
        transform: translateX(-100%);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        opacity: 0;
      }
      
      #sidebar.mobile-open {
        visibility: visible;
        transform: translateX(0);
        opacity: 1;
      }
      
      /* Mobile Overlay */
      #mobile-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.3);
        backdrop-filter: blur(2px);
        z-index: 40;
        visibility: hidden;
        opacity: 0;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      #mobile-overlay.show {
        visibility: visible;
        opacity: 1;
      }
      
      #sidebar .sidebar-content {
        padding: 1.5rem;
        display: flex;
        flex-direction: column;
        height: 100%;
      }
      
      #sidebar .logo-section {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-bottom: 2rem;
      }
      
      #sidebar .logo-icon {
        width: 2.5rem;
        height: 2.5rem;
        background: linear-gradient(to right, #ff6b6b, #ff8e8e);
        border-radius: 0.75rem;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.125rem;
      }
      
      #sidebar .logo-text {
        font-size: 1.25rem;
        line-height: 1.75rem;
        font-weight: 700;
        color: #1f2937;
      }
      
      #sidebar nav {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }
      
      #sidebar a {
        text-decoration: none;
        width: 100%;
      }
      
      #sidebar .nav-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.875rem 1rem;
        border-radius: 0.75rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 0.5rem;
        border: 1px solid transparent;
        position: relative;
        overflow: hidden;
      }

      #sidebar .nav-item::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        height: 100%;
        width: 0;
        background: linear-gradient(to right, var(--color-coral), var(--color-coral-light));
        opacity: 0.1;
        transition: width 0.3s ease;
      }

      #sidebar .nav-item:hover::before {
        width: 100%;
      }
      
      #sidebar .nav-item.active {
        background: linear-gradient(to right, rgba(255, 127, 127, 0.1), rgba(255, 179, 179, 0.1));
        color: var(--color-coral);
        border: 1px solid rgba(255, 127, 127, 0.2);
        box-shadow: 0 2px 4px rgba(255, 127, 127, 0.1);
      }
      
      #sidebar .nav-item:not(.active) {
        color: #4b5563;
      }
      
      #sidebar .nav-item:hover:not(.active) {
        transform: translateX(5px);
        color: var(--color-coral);
      }

      #sidebar .nav-item i {
        transition: transform 0.3s ease;
      }

      #sidebar .nav-item:hover i {
        transform: scale(1.1);
      }

      #sidebar .nav-item.active i {
        color: var(--color-coral);
      }
      
      #sidebar .nav-item i {
        font-size: 1.125rem;
      }
      
      /* Mobile Header */
      #mobile-header {
        background: rgba(255, 255, 255, 0.8);
        backdrop-filter: blur(4px);
        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        padding: 1rem;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      
      #mobile-header .logo-section {
        display: flex;
        align-items: center;
        gap: 0.75rem;
      }
      
      #mobile-header .logo-icon {
        width: 2rem;
        height: 2rem;
        background: linear-gradient(to right, #ff6b6b, #ff8e8e);
        border-radius: 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 0.875rem;
      }
      
      #mobile-header .logo-text {
        font-size: 1.125rem;
        line-height: 1.75rem;
        font-weight: 700;
        color: #1f2937;
      }
      
      #mobile-menu-btn {
        padding: 0.5rem;
        border-radius: 0.5rem;
        border: none;
        background: none;
        cursor: pointer;
        transition: background-color 0.15s;
      }
      
      #mobile-menu-btn:hover {
        background: #f3f4f6;
      }
      
      #mobile-menu-btn i {
        color: #4b5563;
      }
     @media (min-width: 1024px) {
        #sidebar {
          display: block !important;
          transform: translateX(0) !important;
          visibility: visible !important;
          opacity: 1 !important;
        }

        /* Active indicator line */
        #sidebar .nav-item.active::after {
          content: '';
          position: absolute;
          right: 0;
          top: 50%;
          transform: translateY(-50%);
          width: 4px;
          height: 20px;
          background: linear-gradient(to bottom, var(--color-coral), var(--color-coral-light));
          border-radius: 2px;
          animation: slideIn 1s ease-in;
        }

        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateY(-50%) translateX(10px);
          }
          to {
            opacity: 1;
            transform: translateY(-50%) translateX(0);
          }
        }
    }
    @media (min-width: 1024px) {
        #sidebar {
          display: block;
          transform: translateX(0);
        }
      
        #mobile-header {
          display: none;
        }
      
        #mobile-overlay {
          display: none !important;
        }
      
        #main-content {
          margin-left: 16rem;
          padding: 2rem;
        }
      
        #stats-section {
          grid-template-columns: repeat(4, minmax(0, 1fr));
        }
      
        #dashboard-header h2 {
          font-size: 1.875rem;
          line-height: 2.25rem;
        }
      
        #desktop-table {
          display: block;
        }
      
        #mobile-cards {
          display: none;
        }
      }
    /* Hide scrollbar but allow scrolling */
    #sidebar {
        scrollbar-width: none;
        -ms-overflow-style: none;
        overflow-y: auto;
    }

  /* Footer/profile pinned to bottom */
  .sidebar-footer {
    margin-top: auto;
    padding-top: 1rem;
    border-top: 1px solid rgba(0,0,0,0.04);
  }

  .sidebar-footer .profile-item {
    padding: 0.5rem 0.25rem;
    border-radius: 0.5rem;
    text-decoration: none;
    color: inherit;
    border: 2px solid rgba(0,0,0,0.1);
  }

  .sidebar-footer .profile-item img {
    width: 44px;
    height: 44px;
    object-fit: cover;
    border-radius: 9999px;
    border: 2px solid rgba(0,0,0,0.09);
  }

    #sidebar::-webkit-scrollbar {
        display: none;
    }

    /* Additional hover effects */
    #sidebar .nav-item span {
        transition: transform 0.3s ease;
    }

    #sidebar .nav-item:hover span {
        transform: translateX(5px);
    }

    /* Smooth transition for active state */
    #sidebar .nav-item::after {
        transition: all 0.3s ease;
    }
      
        
    </style>
    {% block style %}{% endblock %}
  </head>
  <body>
    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-{% if message.tags == 'error' %}danger{% else %}{{ message.tags }}{% endif %} alert-dismissible fade show" style="z-index: 999;" role="alert">
          {{ message }}
          <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
      {% endfor %}
    {% endif %}
        <!-- Mobile Overlay -->
    <div id="mobile-overlay" class="section-clickable"></div>

    <!-- Sidebar -->
    <div id="sidebar" class="section-clickable">
      <div class="sidebar-content">
        <div class="logo-section">
          <div class="logo-icon">
            <i class="fas fa-user-doctor"></i>
          </div>
          <h1 class="logo-text">LJ Consultancy</h1>
        </div>

        <nav>
          <a href="{% url 'admin_dashboard' %}" class="nav-item {% if request.path == '/admin/dashboard' %}active{% endif %}">
            <i class="fa-solid fa-grip"></i>
            <span>Dashboard</span>
          </a>
          <a href="{% url 'admin_appointments' %}" class="nav-item {% if request.path == '/admin/appointments' %}active{% endif %}">
            <i class="fas fa-calendar-check"></i>
            <span>Find Appointments</span>
          </a>
          <a href="{% url 'manage_admins' %}" class="nav-item {% if request.path == '/admin/manage-admins' %}active{% endif %}">
            <i class="fas fa-circle-user"></i>
            <span>Manage Admins</span>
          </a>
        </nav>

        <div class="sidebar-footer">
          <a href="{% url 'admin_profile' %}" class="profile-item nav-item {% if request.path == '/admin/profile' %}active{% endif %}" style="padding: 5px; display: flex; align-items: center; gap: .75rem; border: 2px solid rgba(0,0,0,0.04);"> 
            <img src="{{ user.profile.image.url }}" alt="" style="width: 50px; height: 50px; border-radius: 9999px;">
            <span>{{ user.first_name }}</span>
          </a>
        </div>
      </div>
    </div>

    <!-- Mobile Header -->
    <div id="mobile-header" class="section-clickable">
      <div class="logo-section">
        <div class="logo-icon">
          <i class="fas fa-user-doctor"></i>
        </div>
        <h1 class="logo-text">LJ Consultancy</h1>
      </div>
      <button id="mobile-menu-btn" class="section-clickable"><i class="fas fa-bars"></i></button>
    </div>
    {% block content %}
    {% endblock %}

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
     <script>
        // Mobile menu functionality with smooth transitions
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const sidebar = document.getElementById('sidebar');
        const mobileOverlay = document.getElementById('mobile-overlay');
        let isAnimating = false;

        function openMobileSidebar() {
            if (isAnimating) return;
            isAnimating = true;

            // Start animation
            requestAnimationFrame(() => {
                document.body.style.overflow = 'hidden';
                mobileOverlay.style.display = 'block';
                sidebar.style.display = 'block';
                
                // Trigger reflow
                sidebar.offsetHeight;
                
                sidebar.classList.add('mobile-open');
                mobileOverlay.classList.add('show');
                
                // Reset animation flag after transition
                setTimeout(() => {
                    isAnimating = false;
                }, 400); // Match transition duration
            });
        }

        function closeMobileSidebar() {
            if (isAnimating) return;
            isAnimating = true;

            sidebar.classList.remove('mobile-open');
            mobileOverlay.classList.remove('show');
            document.body.style.overflow = '';

            // Wait for transition to complete before hiding elements
            setTimeout(() => {
                if (!sidebar.classList.contains('mobile-open')) {
                    mobileOverlay.style.display = 'none';
                    sidebar.style.display = 'none';
                }
                isAnimating = false;
            }, 400); // Match transition duration
        }

        // Add event listeners
        mobileMenuBtn.addEventListener('click', openMobileSidebar);
        mobileOverlay.addEventListener('click', closeMobileSidebar);

        // Handle escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && sidebar.classList.contains('mobile-open')) {
                closeMobileSidebar();
            }
        });

        // Add touch swipe to close
        let touchStartX = 0;
        sidebar.addEventListener('touchstart', function(e) {
            touchStartX = e.touches[0].clientX;
        }, { passive: true });

        sidebar.addEventListener('touchmove', function(e) {
            if (!sidebar.classList.contains('mobile-open')) return;
            
            const touchEndX = e.touches[0].clientX;
            const diff = touchStartX - touchEndX;
            
            if (diff > 50) { // Swipe left threshold
                closeMobileSidebar();
            }
        }, { passive: true });

        // Close sidebar on window resize to desktop
        let resizeTimer;
        window.addEventListener('resize', function() {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(function() {
                if (window.innerWidth >= 1024) {
                    closeMobileSidebar();
                }
            }, 250);
        });
    </script>
  </body>
</html>
